{
  "title": "Revenue KPIs",
  "uid": "revenue-kpis",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "30s",
  "tags": ["ecommerce", "revenue"],
  "panels": [
    {
      "id": 1,
      "title": "Total Revenue",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 0 },
      "datasource": { "type": "yesoreyeram-infinity-datasource" },
      "targets": [
        {
          "refId": "A",
          "type": "json",
          "source": "url",
          "url": "http://fastapi:8000/kpi/summary",
          "root_selector": "",
          "columns": [{ "selector": "total_revenue", "text": "Total Revenue", "type": "number" }],
          "url_options": { "method": "GET" }
        }
      ],
      "options": { "reduceOptions": { "calcs": ["lastNotNull"] }, "textMode": "value", "colorMode": "background" },
      "fieldConfig": { "defaults": { "unit": "currencyEUR", "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "green", "value": null }] } }, "overrides": [] }
    },
    {
      "id": 2,
      "title": "Total Orders",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 0 },
      "datasource": { "type": "yesoreyeram-infinity-datasource" },
      "targets": [
        {
          "refId": "A",
          "type": "json",
          "source": "url",
          "url": "http://fastapi:8000/kpi/summary",
          "root_selector": "",
          "columns": [{ "selector": "total_orders", "text": "Total Orders", "type": "number" }],
          "url_options": { "method": "GET" }
        }
      ],
      "options": { "reduceOptions": { "calcs": ["lastNotNull"] }, "textMode": "value", "colorMode": "background" },
      "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "blue", "value": null }] } }, "overrides": [] }
    },
    {
      "id": 3,
      "title": "Average Order Value",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 12, "y": 0 },
      "datasource": { "type": "yesoreyeram-infinity-datasource" },
      "targets": [
        {
          "refId": "A",
          "type": "json",
          "source": "url",
          "url": "http://fastapi:8000/kpi/summary",
          "root_selector": "",
          "columns": [{ "selector": "avg_order_value", "text": "AOV", "type": "number" }],
          "url_options": { "method": "GET" }
        }
      ],
      "options": { "reduceOptions": { "calcs": ["lastNotNull"] }, "textMode": "value", "colorMode": "background" },
      "fieldConfig": { "defaults": { "unit": "currencyEUR", "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "orange", "value": null }] } }, "overrides": [] }
    },
    {
      "id": 4,
      "title": "Completion Rate",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 18, "y": 0 },
      "datasource": { "type": "yesoreyeram-infinity-datasource" },
      "targets": [
        {
          "refId": "A",
          "type": "json",
          "source": "url",
          "url": "http://fastapi:8000/kpi/summary",
          "root_selector": "",
          "columns": [{ "selector": "completion_rate_pct", "text": "Completion Rate", "type": "number" }],
          "url_options": { "method": "GET" }
        }
      ],
      "options": { "reduceOptions": { "calcs": ["lastNotNull"] }, "textMode": "value", "colorMode": "background" },
      "fieldConfig": { "defaults": { "unit": "percent", "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "green", "value": null }] } }, "overrides": [] }
    },
    {
      "id": 5,
      "title": "Monthly Revenue",
      "type": "barchart",
      "gridPos": { "h": 9, "w": 14, "x": 0, "y": 4 },
      "datasource": { "type": "yesoreyeram-infinity-datasource" },
      "targets": [
        {
          "refId": "A",
          "type": "json",
          "source": "url",
          "url": "http://fastapi:8000/kpi/revenue",
          "root_selector": "",
          "columns": [
            { "selector": "month", "text": "Month", "type": "string" },
            { "selector": "total_revenue", "text": "Revenue", "type": "number" }
          ],
          "url_options": { "method": "GET" }
        }
      ],
      "fieldConfig": { "defaults": { "unit": "currencyEUR" }, "overrides": [] },
      "options": { "xField": "Month" }
    },
    {
      "id": 6,
      "title": "Conversion Rate by Source",
      "type": "barchart",
      "gridPos": { "h": 9, "w": 10, "x": 14, "y": 4 },
      "datasource": { "type": "yesoreyeram-infinity-datasource" },
      "targets": [
        {
          "refId": "A",
          "type": "json",
          "source": "url",
          "url": "http://fastapi:8000/kpi/conversion",
          "root_selector": "",
          "columns": [
            { "selector": "source", "text": "Source", "type": "string" },
            { "selector": "conversion_rate_pct", "text": "Conversion Rate (%)", "type": "number" }
          ],
          "url_options": { "method": "GET" }
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" }, "overrides": [] },
      "options": { "xField": "Source" }
    }
  ]
}
